---
title: "Football_script"
output: html_document
date: "2022-12-20"
---

```{r, include = FALSE}
library("worldfootballR")
library(tidyverse)
library(dplyr)
```

## Leagure URLs
```{r}
# get urls
GER_urls = fb_league_urls(country = "GER", gender = "M", season_end_year = 2021, tier = '1st')

# get match URLs
match_urls = worldfootballR::fb_match_urls(country = "GER", gender = "M", tier = "1st", season_end_year = "2023")

# get lineup for a match
lineups = worldfootballR::fb_match_lineups(match_url = match_urls[1], time_pause = 2)
```

## Player URLs
```{r}
# get player urls from ALL players
mapped_players <- player_dictionary_mapping()
dplyr::glimpse(mapped_players)

# get player URLs ONLY for players of a certain match
mapped_players_match = mapped_players[mapped_players$PlayerFBref %in% lineups$Player_Name, ]
```
## Player statistics
```{r}
# get statistics of players from certain match
scouting_FB =  sapply(mapped_players_match$UrlFBref[1:2], function(x) worldfootballR::fb_player_scouting_report(player_url = x, pos_versus = "primary", time_pause = 2))

# statistics of Players from TM
scouting_TM = sapply(mapped_players_match$UrlTmarkt, function(x) data.frame(worldfootballR::tm_player_bio(player_urls = x)))
# combine data frames
scouting_TM_c = plyr::rbind.fill(scouting_TM)
```





